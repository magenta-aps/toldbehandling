{% extends "admin/admin_layout.html" %}
{% load static %}
{% load i18n %}
{% load l10n %}

{% block content %}
<div class="mx-5">
    <form method="get" action="{% url 'afgiftstabel_view' %}">
    <h1>Opret Afgiftstabel</h1>
    <div class="row">
        <div class="col-4"><label for="date_from">Gyldig fra:</label></div>
        <div class="col-8"><input id="date_from" type="date" class="form-control" required=""/></div>
    </div>
    <div class="row">
        <div class="col-4"><label for="file">Regneark:</label></div>
        <div class="col-8">
            <div class="col custom-file">
                <input type="file" name="file" data-validity-sizeoverflow="Filen er for stor; den må max. være 10.0 MB" max_size="10000000" class="mr-2 custom-file-input form-control" required="" id="file">
                <label class="custom-file-label"></label>
            </div>
        </div>
    </div>
    <div class="clearfix">
        <button type="submit" class="btn btn-success float-end">Opret</button>
    </div>
    </form>
</div>
<script>
    $(function () {
        // Filefield
        // ---------
        const fileUpdate = function () {
            // Vis filnavn
            $(this).parents(".custom-file").find(".custom-file-label").text(
                $(this).val().split("\\").pop()
            );
            // Validér filstørrelse
            if (this.files.length) {
                const maxsize = this.getAttribute("max_size");
                const filesize = this.files[0].size;
                if (maxsize && filesize > maxsize) {
                    this.setCustomValidity(this.getAttribute("data-validity-sizeoverflow"));
                } else {
                    this.setCustomValidity("");
                }
            }
        };
        const fileInputs = $("input[type=file]");
        fileInputs.change(fileUpdate);
        fileInputs.each(fileUpdate);
    });
</script>
{% endblock %}
